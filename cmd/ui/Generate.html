<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Password Generator</title>
<body>
  <center>
    <h1>Generate Password</h1>
    <script>
      const userName = document.getElementById("uname").value
      const companyName = document.getElementById("compname").value
      const randomWord = document.getElementById("randword").value

      const storePasswords = async () => {
        const logs = document.getElementById("logs")

        const response = await fetch('https://api.tracd-projects.uk/password-generator/generate?' + new URLSearchParams({
          userName: userName,
          companyName: companyName,
          randomWord: randomWord
        }, 
        {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json'
          }
        }));

        const responseStatus = response.status;
        const responseBody = await response.text();
        if (responseStatus == 200) {
          logs.value = responseBody
        } else {
          logs.value = "api call failed with status: " + responseStatus
        }
      }

    </script>
      <form action="" method="post">
        <label for="Username">Username:</label>
        <input type="text" id="uname" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}" 
        title="Must contain at least 6 characters with at least 1 number, 1 lowercase letter and 1 uppercase letter" required>
        <label for="compname">Company name:</label>
        <input type="text" id="compname" pattern = "[A-Za-z].{2,}" 
        title = "Must contain at least 3 characters, 1 uppercase letter and 1 lowercase letter. No special characters or numbers" required ><br><br>
        <label for="randname">Random word:</label>
        <input type="text" id="randword" pattern = "[A-Za-z].{2,}" 
        title = "Must contain at least 3 characters, 1 uppercase letter and 1 lowercase letter. No special characters or numbers"required><br><br>
        <button class="submit" type="submit" onclick="storePasswords()">Generate Password</button><br><br>
      </form>
      <a href="Retrieve.html"><button class="submit" type="submit">Retrieve Password</button></a><br><br> 

    
    <textarea type="text" id="logs" rows="4" cols="50"></textarea>
  </center>
</body>
</html>